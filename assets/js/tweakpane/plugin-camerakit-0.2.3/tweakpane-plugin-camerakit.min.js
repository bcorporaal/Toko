!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).TweakpaneCamerakitPlugin={})}(this,(function(t){"use strict";function e(t){return null==t}class n{constructor(){this.observers_={}}on(t,e){let n=this.observers_[t];return n||(n=this.observers_[t]=[]),n.push({handler:e}),this}off(t,e){const n=this.observers_[t];return n&&(this.observers_[t]=n.filter((t=>t.handler!==e))),this}emit(t,e){const n=this.observers_[t];n&&n.forEach((t=>{t.handler(e)}))}}const i="tp";function r(t){return(e,n)=>[i,"-",t,"v",e?`_${e}`:"",n?`-${n}`:""].join("")}class s{constructor(t,e){var i;this.constraint_=null==e?void 0:e.constraint,this.equals_=null!==(i=null==e?void 0:e.equals)&&void 0!==i?i:(t,e)=>t===e,this.emitter=new n,this.rawValue_=t}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(t):t;(!this.equals_(this.rawValue_,i)||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:n,rawValue:i,sender:this}))}}class o{constructor(t){this.emitter=new n,this.value_=t}get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0};(this.value_!==t||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:n,rawValue:this.value_,sender:this}))}}function a(t,e){const n=null==e?void 0:e.constraint,i=null==e?void 0:e.equals;return n||i?new s(t,e):new o(t)}class l{constructor(t){this.emitter=new n,this.valMap_=t;for(const t in this.valMap_){this.valMap_[t].emitter.on("change",(()=>{this.emitter.emit("change",{key:t,sender:this})}))}}static createCore(t){return Object.keys(t).reduce(((e,n)=>Object.assign(e,{[n]:a(t[n])})),{})}static fromObject(t){const e=this.createCore(t);return new l(e)}get(t){return this.valMap_[t].rawValue}set(t,e){this.valMap_[t].rawValue=e}value(t){return this.valMap_[t]}}function c(t){return e=>n=>{if(!e&&void 0===n)return{succeeded:!1,value:void 0};if(e&&void 0===n)return{succeeded:!0,value:void 0};const i=t(n);return void 0!==i?{succeeded:!0,value:i}:{succeeded:!1,value:void 0}}}function u(t){return{custom:e=>c(e)(t),boolean:c((t=>"boolean"==typeof t?t:void 0))(t),number:c((t=>"number"==typeof t?t:void 0))(t),string:c((t=>"string"==typeof t?t:void 0))(t),function:c((t=>"function"==typeof t?t:void 0))(t),constant:e=>c((t=>t===e?e:void 0))(t),raw:c((t=>t))(t),object:e=>c((t=>{var n;if(null!==(n=t)&&"object"==typeof n)return function(t,e){return Object.keys(e).reduce(((n,i)=>{if(void 0===n)return;const r=(0,e[i])(t[i]);return r.succeeded?Object.assign(Object.assign({},n),{[i]:r.value}):void 0}),{})}(t,e)}))(t),array:e=>c((t=>{var n;if(Array.isArray(t))return n=e,t.reduce(((t,e)=>{if(void 0===t)return;const i=n(e);return i.succeeded&&void 0!==i.value?[...t,i.value]:void 0}),[])}))(t)}}const h={optional:u(!0),required:u(!1)};function p(t,e){const n=h.required.object(e)(t);return n.succeeded?n.value:void 0}const v="http://www.w3.org/2000/svg";function d(t){t.parentElement&&t.parentElement.removeChild(t)}class m{constructor(t){this.constraints=t}constrain(t){return this.constraints.reduce(((t,e)=>e.constrain(t)),t)}}function f(t,e){if(t instanceof e)return t;if(t instanceof m){const n=t.constraints.reduce(((t,n)=>t||(n instanceof e?n:null)),null);if(n)return n}return null}class g{constructor(t){this.maxValue=t.max,this.minValue=t.min}constrain(t){let n=t;return e(this.minValue)||(n=Math.max(n,this.minValue)),e(this.maxValue)||(n=Math.min(n,this.maxValue)),n}}class _{constructor(t){this.step=t}constrain(t){return(t<0?-Math.round(-t/this.step):Math.round(t/this.step))*this.step}}class w{constructor(t){this.text=t}evaluate(){return Number(this.text)}toString(){return this.text}}const b={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};class k{constructor(t,e,n){this.left=e,this.operator=t,this.right=n}evaluate(){const t=b[this.operator];if(!t)throw new Error(`unexpected binary operator: '${this.operator}`);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const y={"+":t=>t,"-":t=>-t,"~":t=>~t};class x{constructor(t,e){this.operator=t,this.expression=e}evaluate(){const t=y[this.operator];if(!t)throw new Error(`unexpected unary operator: '${this.operator}`);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function E(t){return(e,n)=>{for(let i=0;i<t.length;i++){const r=t[i](e,n);if(""!==r)return r}return""}}function V(t,e){var n;const i=t.substr(e).match(/^\s+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function M(t,e){var n;const i=t.substr(e).match(/^[0-9]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function P(t,e){const n=t.substr(e,1);if(e+=1,"e"!==n.toLowerCase())return"";const i=function(t,e){const n=M(t,e);if(""!==n)return n;const i=t.substr(e,1);if("-"!==i&&"+"!==i)return"";const r=M(t,e+=1);return""===r?"":i+r}(t,e);return""===i?"":n+i}function C(t,e){const n=t.substr(e,1);if("0"===n)return n;const i=function(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}(t,e);return e+=i.length,""===i?"":i+M(t,e)}const S=E([function(t,e){const n=C(t,e);if(e+=n.length,""===n)return"";const i=t.substr(e,1);if(e+=i.length,"."!==i)return"";const r=M(t,e);return n+i+r+P(t,e+=r.length)},function(t,e){const n=t.substr(e,1);if(e+=n.length,"."!==n)return"";const i=M(t,e);return e+=i.length,""===i?"":n+i+P(t,e)},function(t,e){const n=C(t,e);return e+=n.length,""===n?"":n+P(t,e)}]);const L=E([function(t,e){const n=t.substr(e,2);if(e+=n.length,"0b"!==n.toLowerCase())return"";const i=function(t,e){var n;const i=t.substr(e).match(/^[01]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}(t,e);return""===i?"":n+i},function(t,e){const n=t.substr(e,2);if(e+=n.length,"0o"!==n.toLowerCase())return"";const i=function(t,e){var n;const i=t.substr(e).match(/^[0-7]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}(t,e);return""===i?"":n+i},function(t,e){const n=t.substr(e,2);if(e+=n.length,"0x"!==n.toLowerCase())return"";const i=function(t,e){var n;const i=t.substr(e).match(/^[0-9a-f]+/i);return null!==(n=i&&i[0])&&void 0!==n?n:""}(t,e);return""===i?"":n+i}]),K=E([L,S]);function D(t,e){return function(t,e){const n=K(t,e);return e+=n.length,""===n?null:{evaluable:new w(n),cursor:e}}(t,e)||function(t,e){const n=t.substr(e,1);if(e+=n.length,"("!==n)return null;const i=I(t,e);if(!i)return null;e=i.cursor,e+=V(t,e).length;const r=t.substr(e,1);return e+=r.length,")"!==r?null:{evaluable:i.evaluable,cursor:e}}(t,e)}function T(t,e,n){n+=V(e,n).length;const i=t.filter((t=>e.startsWith(t,n)))[0];return i?(n+=i.length,{cursor:n+=V(e,n).length,operator:i}):null}const j=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce(((t,e)=>function(t,e){return(n,i)=>{const r=t(n,i);if(!r)return null;i=r.cursor;let s=r.evaluable;for(;;){const r=T(e,n,i);if(!r)break;i=r.cursor;const o=t(n,i);if(!o)return null;i=o.cursor,s=new k(r.operator,s,o.evaluable)}return s?{cursor:i,evaluable:s}:null}}(t,e)),(function t(e,n){const i=D(e,n);if(i)return i;const r=e.substr(n,1);if(n+=r.length,"+"!==r&&"-"!==r&&"~"!==r)return null;const s=t(e,n);return s?{cursor:n=s.cursor,evaluable:new x(r,s.evaluable)}:null}));function I(t,e){return e+=V(t,e).length,j(t,e)}function R(t){var e;const n=function(t){const e=I(t,0);return e?e.cursor+V(t,e.cursor).length!==t.length?null:e.evaluable:null}(t);return null!==(e=null==n?void 0:n.evaluate())&&void 0!==e?e:null}function U(t){if("number"==typeof t)return t;if("string"==typeof t){const n=R(t);if(!e(n))return n}return 0}function N(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}function Y(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function A(t){return{altKey:t.altKey,downKey:"ArrowDown"===t.key,shiftKey:t.shiftKey,upKey:"ArrowUp"===t.key}}function $(t,e){const n=e.ownerDocument.defaultView,i=e.getBoundingClientRect();return{x:t.pageX-((n&&n.scrollX||0)+i.left),y:t.pageY-((n&&n.scrollY||0)+i.top)}}class X{constructor(t){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new n,t.addEventListener("touchstart",this.onTouchStart_),t.addEventListener("touchmove",this.onTouchMove_),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}computePosition_(t){const e=this.elem_.getBoundingClientRect();return{bounds:{width:e.width,height:e.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var e;t.preventDefault(),null===(e=t.currentTarget)||void 0===e||e.focus();const n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_($(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_($(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){const e=this.elem_.ownerDocument;e.removeEventListener("mousemove",this.onDocumentMouseMove_),e.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_($(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchMove_(t){const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchEnd_(t){var e;const n=null!==(e=t.targetTouches.item(0))&&void 0!==e?e:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-i.left,y:n.clientY-i.top}:void 0),sender:this,shiftKey:t.shiftKey})}}function q(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function B(t,e,n){return Math.min(Math.max(t,e),n)}const O=r("txt");class z{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(O(),O(void 0,"num")),e.arrayPosition&&this.element.classList.add(O(void 0,e.arrayPosition)),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("input");n.classList.add(O("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=e.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(O()),this.inputElement.classList.add(O("i"));const i=t.createElement("div");i.classList.add(O("k")),this.element.appendChild(i),this.knobElement=i;const s=t.createElementNS(v,"svg");s.classList.add(O("g")),this.knobElement.appendChild(s);const o=t.createElementNS(v,"path");o.classList.add(O("gb")),s.appendChild(o),this.guideBodyElem_=o;const a=t.createElementNS(v,"path");a.classList.add(O("gh")),s.appendChild(a),this.guideHeadElem_=a;const l=t.createElement("div");l.classList.add(r("tt")()),this.knobElement.appendChild(l),this.tooltipElem_=l,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.refresh()}onDraggingChange_(t){if(null===t.rawValue)return void this.element.classList.remove(O(void 0,"drg"));this.element.classList.add(O(void 0,"drg"));const e=t.rawValue/this.props_.get("draggingScale"),n=e+(e>0?-1:e<0?1:0),i=B(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${n+i},0 L${n},4 L${n+i},8`,`M ${e},-1 L${e},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${e},4`);const r=this.props_.get("formatter");this.tooltipElem_.textContent=r(this.value.rawValue),this.tooltipElem_.style.left=`${e}px`}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}}class W{constructor(t,e){this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.dragging_=a(null),this.view=new z(t,{arrayPosition:e.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const n=new X(this.view.knobElement);n.emitter.on("down",this.onPointerDown_),n.emitter.on("move",this.onPointerMove_),n.emitter.on("up",this.onPointerUp_)}onInputChange_(t){const n=t.currentTarget.value,i=this.parser_(n);e(i)||(this.value.rawValue=i),this.view.refresh()}onInputKeyDown_(t){const e=Y(this.baseStep_,A(t));0!==e&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}onInputKeyUp_(t){0!==Y(this.baseStep_,A(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(t){if(!t.point)return null;const e=t.point.x-t.bounds.width/2;return this.originRawValue_+e*this.props.get("draggingScale")}onPointerMove_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}function F(t,e){t.write(e)}function H(t,e){const n=t&&f(t,_);return n?q(n.step):Math.max(q(e),2)}function G(t){const e=function(t){const e=t?f(t,_):null;return e?e.step:null}(t);return null!=e?e:1}function J(t,e){var n;const i=t&&f(t,_),r=Math.abs(null!==(n=null==i?void 0:i.step)&&void 0!==n?n:e);return 0===r?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}const Q=r("ckr");class Z{constructor(t,e){this.tickElems_=[],this.labelElems_=[],this.boundsWidth_=-1,this.onShowsTooltipChange_=this.onShowsTooltipChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.formatters_=e.formatters,this.unit_=e.unit,this.element=t.createElement("div"),this.element.classList.add(Q(),Q(void 0,`m${e.seriesId}`)),e.viewProps.bindClassModifiers(this.element),this.value_=e.value,this.value_.emitter.on("change",this.onValueChange_),e.showsTooltip.emitter.on("change",this.onShowsTooltipChange_);const n=t.createElement("div");n.classList.add(Q("w")),this.element.appendChild(n),this.offsetElem_=t.createElement("div"),this.offsetElem_.classList.add(Q("o")),n.appendChild(this.offsetElem_),this.svgElem_=t.createElementNS(v,"svg"),this.svgElem_.classList.add(Q("g")),this.offsetElem_.appendChild(this.svgElem_),this.tooltipElem_=t.createElement("div"),this.tooltipElem_.classList.add(r("tt")(),Q("tt")),this.element.appendChild(this.tooltipElem_),this.waitToBeAdded_()}waitToBeAdded_(){const t=new IntersectionObserver((e=>{e.forEach((e=>{e.target===this.element&&0!==e.intersectionRatio&&(this.update(),t.disconnect())}))}),{root:null});t.observe(this.element)}rebuildScaleIfNeeded_(t){if(this.boundsWidth_===t)return;this.boundsWidth_=t,this.tickElems_.forEach((t=>{d(t)})),this.tickElems_=[],this.labelElems_.forEach((t=>{d(t)})),this.labelElems_=[];const e=this.element.ownerDocument,n=this.unit_.ticks,i=this.unit_.pixels,r=(2*(Math.ceil(t/2/i)+1)+1)*n,s=i/n;for(let t=0;t<r;t++){const i=t*s;if(t%n==0){const t=e.createElementNS(v,"line");t.classList.add(Q("mjt")),t.setAttributeNS(null,"x1",String(i)),t.setAttributeNS(null,"y1","0"),t.setAttributeNS(null,"x2",String(i)),t.setAttributeNS(null,"y2","2"),this.svgElem_.appendChild(t),this.tickElems_.push(t);const n=e.createElement("div");n.classList.add(Q("l")),n.style.left=`${i}px`,this.offsetElem_.appendChild(n),this.labelElems_.push(n)}else{const t=e.createElementNS(v,"line");t.classList.add(Q("mnt")),t.setAttributeNS(null,"x1",String(i)),t.setAttributeNS(null,"y1","0"),t.setAttributeNS(null,"x2",String(i)),t.setAttributeNS(null,"y2","2"),this.svgElem_.appendChild(t),this.tickElems_.push(t)}}}updateScale_(t){const e=this.unit_.value,n=this.unit_.pixels,i=this.value_.rawValue,r=Math.ceil(t/2/n)+1,s=i-i%e-e*r,o=r=>1-Math.pow(B(Math.abs(i-r)/(t/2*(e/n)),0,1),10);this.labelElems_.forEach(((t,n)=>{const i=s+n*e;t.textContent=this.formatters_.ring(i),t.style.opacity=String(o(i))}));const a=this.unit_.ticks;this.tickElems_.forEach(((t,n)=>{const i=s+n/a*e;t.style.opacity=String(o(i))}))}update(){const t=this.element.getBoundingClientRect().width,e=this.unit_.value,n=this.unit_.pixels,i=this.value_.rawValue,r=t/2-n/e*(i%e+e*(Math.ceil(t/2/n)+1));this.offsetElem_.style.transform=`translateX(${r}px)`,this.tooltipElem_.textContent=this.formatters_.text(i),this.rebuildScaleIfNeeded_(t),this.updateScale_(t)}onValueChange_(){this.update()}onShowsTooltipChange_(t){t.rawValue?this.element.classList.add(Q(void 0,"tt")):this.element.classList.remove(Q(void 0,"tt"))}}class tt{constructor(t,e){this.ox_=0,this.ov_=0,this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.tooltipEnabled_=e.tooltipEnabled,this.unit_=e.unit,this.showsTooltip_=a(!1),this.view=new Z(t,{formatters:e.formatters,seriesId:e.seriesId,showsTooltip:this.showsTooltip_,unit:e.unit,value:this.value,viewProps:this.viewProps});const n=new X(this.view.element);n.emitter.on("down",this.onPointerDown_),n.emitter.on("move",this.onPointerMove_),n.emitter.on("up",this.onPointerUp_)}onPointerDown_(t){const e=t.data;e.point&&(this.ox_=e.point.x,this.ov_=this.value.rawValue,this.tooltipEnabled_&&(this.showsTooltip_.rawValue=!0))}onPointerMove_(t){const e=t.data;if(!e.point)return;const n=e.point.x-this.ox_,i=this.unit_.pixels,r=this.unit_.value;this.value.setRawValue(this.ov_-n/i*r,{forceEmit:!1,last:!1})}onPointerUp_(){this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0}),this.showsTooltip_.rawValue=!1}}const et=r("ckrtxt");class nt{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(et());const n=t.createElement("div");n.classList.add(et("r")),n.appendChild(e.ringView.element),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(et("t")),i.appendChild(e.textView.element),this.element.appendChild(i)}}class it{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.rc_=new tt(t,{formatters:e.formatters,seriesId:e.seriesId,tooltipEnabled:!1,unit:e.ringUnit,value:this.value,viewProps:this.viewProps}),this.tc_=new W(t,{baseStep:e.baseStep,parser:e.parser,props:l.fromObject({draggingScale:e.draggingScale,formatter:e.formatters.text}),value:this.value,viewProps:this.viewProps}),this.view=new nt(t,{ringView:this.rc_.view,textView:this.tc_.view})}}function rt(t){const n=[],i=function(t){return"max"in t&&!e(t.max)||"min"in t&&!e(t.min)?new g({max:t.max,min:t.min}):null}(t);i&&n.push(i);const r=function(t){return"step"in t&&!e(t.step)?new _(t.step):null}(t);return r&&n.push(r),new m(n)}function st(t){return 0===t||1===t||2===t?t:void 0}function ot(t){return void 0!==t?String(t):"0"}function at(t){const e=N(q(t.value));return t=>{const n=e(t),i=n.substr(0,1);return n+("-"===i||"+"===i?" ":"")}}const lt=[{id:"input-camerakit-ring",type:"input",css:'.tp-ckrv_w{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-ckrv_w{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-ckrv_w:hover{background-color:var(--in-bg-h)}.tp-ckrv_w:focus{background-color:var(--in-bg-f)}.tp-ckrv_w:active{background-color:var(--in-bg-a)}.tp-ckrv_w:disabled{opacity:.5}.tp-ckrv{position:relative}.tp-ckrv.tp-v-disabled{opacity:.5}.tp-ckrv::before{background-color:var(--grv-fg);bottom:0;content:"";height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-ckrv::after{background-color:var(--in-fg);content:"";left:0;margin:auto;position:absolute;right:0}.tp-ckrv_w{cursor:pointer;height:calc(var(--bld-us));overflow:hidden}.tp-ckrv_o{height:100%;left:0;position:relative}.tp-ckrv_g{display:block;height:2px;overflow:visible;position:absolute;width:100%}.tp-ckrv_mjt{stroke:var(--in-fg);stroke-width:2;transform-origin:bottom}.tp-ckrv_mnt{stroke:var(--in-fg);stroke-width:1;transform-origin:bottom}.tp-ckrv_l{color:var(--in-fg);font-size:.9em;pointer-events:none;position:absolute;top:0;transform:translateX(-50%);white-space:pre}.tp-ckrv_tt{left:50%;top:-4px;visibility:hidden}.tp-ckrv.tp-ckrv-tt .tp-ckrv_tt{visibility:visible}.tp-ckrv.tp-ckrv-m0::before{display:none}.tp-ckrv.tp-ckrv-m0::after{bottom:0;height:6px;width:2px}.tp-ckrv.tp-ckrv-m0 .tp-ckrv_g{bottom:0;margin:auto;transform:translateY(3px);top:0}.tp-ckrv.tp-ckrv-m0 .tp-ckrv_mjt{transform:scaleY(3)}.tp-ckrv.tp-ckrv-m0 .tp-ckrv_mnt{transform:scaleY(2)}.tp-ckrv.tp-ckrv-m0 .tp-ckrv_l{line-height:8px;transform:translateX(-50%) scale(0.8)}.tp-ckrv.tp-ckrv-m1::before{display:none}.tp-ckrv.tp-ckrv-m1::after{bottom:0;height:8px;width:2px}.tp-ckrv.tp-ckrv-m1 .tp-ckrv_g{bottom:0}.tp-ckrv.tp-ckrv-m1 .tp-ckrv_mjt{stroke-width:1;transform:scaleY(4)}.tp-ckrv.tp-ckrv-m1 .tp-ckrv_mnt{transform:scaleY(2)}.tp-ckrv.tp-ckrv-m1 .tp-ckrv_l{line-height:12px}.tp-ckrv.tp-ckrv-m2::before{transform:translateY(3px)}.tp-ckrv.tp-ckrv-m2::after{border-radius:2px;bottom:1px;height:4px;width:4px}.tp-ckrv.tp-ckrv-m2 .tp-ckrv_g{display:none}.tp-ckrv.tp-ckrv-m2 .tp-ckrv_l{line-height:12px;transform:translateX(-50%)}.tp-ckrv.tp-ckrv-mw::before,.tp-ckrv.tp-ckrv-mw::after{display:none}.tp-ckrv.tp-ckrv-mw .tp-ckrv_g{bottom:0;opacity:.2}.tp-ckrv.tp-ckrv-mw .tp-ckrv_mjt,.tp-ckrv.tp-ckrv-mw .tp-ckrv_mnt{stroke:var(--in-fg);stroke-width:2;transform:scaleY(10)}.tp-ckrv.tp-ckrv-mw .tp-ckrv_l{display:none}.tp-ckrtxtv{display:flex}.tp-ckrtxtv_r{flex:2}.tp-ckrtxtv_t{flex:1;margin-left:4px}',accept(t,e){if("number"!=typeof t)return null;const n=h,i=p(e,{view:n.required.constant("cameraring"),max:n.optional.number,min:n.optional.number,series:n.optional.custom(st),step:n.optional.number,unit:n.optional.object({pixels:n.required.number,ticks:n.required.number,value:n.required.number}),wide:n.optional.boolean});return i?{initialValue:t,params:i}:null},binding:{reader:t=>U,constraint:t=>rt(t.params),writer:t=>F},controller(t){var e,n,i;const r=null!==(e=t.params.unit)&&void 0!==e?e:{ticks:5,pixels:40,value:10},s=t.constraint,o={ring:at(r),text:N(H(s,t.initialValue))};return t.params.wide?new tt(t.document,{formatters:o,seriesId:null!==(n=ot(t.params.series))&&void 0!==n?n:"0",tooltipEnabled:!0,unit:r,value:t.value,viewProps:t.viewProps}):new it(t.document,{baseStep:G(s),draggingScale:J(s,t.initialValue),formatters:o,parser:R,seriesId:null!==(i=ot(t.params.series))&&void 0!==i?i:"0",ringUnit:r,value:t.value,viewProps:t.viewProps})}},{id:"input-camerakit-wheel",type:"input",css:'.tp-ckrv_w{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-ckrv_w{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-ckrv_w:hover{background-color:var(--in-bg-h)}.tp-ckrv_w:focus{background-color:var(--in-bg-f)}.tp-ckrv_w:active{background-color:var(--in-bg-a)}.tp-ckrv_w:disabled{opacity:.5}.tp-ckrv{position:relative}.tp-ckrv.tp-v-disabled{opacity:.5}.tp-ckrv::before{background-color:var(--grv-fg);bottom:0;content:"";height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-ckrv::after{background-color:var(--in-fg);content:"";left:0;margin:auto;position:absolute;right:0}.tp-ckrv_w{cursor:pointer;height:calc(var(--bld-us));overflow:hidden}.tp-ckrv_o{height:100%;left:0;position:relative}.tp-ckrv_g{display:block;height:2px;overflow:visible;position:absolute;width:100%}.tp-ckrv_mjt{stroke:var(--in-fg);stroke-width:2;transform-origin:bottom}.tp-ckrv_mnt{stroke:var(--in-fg);stroke-width:1;transform-origin:bottom}.tp-ckrv_l{color:var(--in-fg);font-size:.9em;pointer-events:none;position:absolute;top:0;transform:translateX(-50%);white-space:pre}.tp-ckrv_tt{left:50%;top:-4px;visibility:hidden}.tp-ckrv.tp-ckrv-tt .tp-ckrv_tt{visibility:visible}.tp-ckrv.tp-ckrv-m0::before{display:none}.tp-ckrv.tp-ckrv-m0::after{bottom:0;height:6px;width:2px}.tp-ckrv.tp-ckrv-m0 .tp-ckrv_g{bottom:0;margin:auto;transform:translateY(3px);top:0}.tp-ckrv.tp-ckrv-m0 .tp-ckrv_mjt{transform:scaleY(3)}.tp-ckrv.tp-ckrv-m0 .tp-ckrv_mnt{transform:scaleY(2)}.tp-ckrv.tp-ckrv-m0 .tp-ckrv_l{line-height:8px;transform:translateX(-50%) scale(0.8)}.tp-ckrv.tp-ckrv-m1::before{display:none}.tp-ckrv.tp-ckrv-m1::after{bottom:0;height:8px;width:2px}.tp-ckrv.tp-ckrv-m1 .tp-ckrv_g{bottom:0}.tp-ckrv.tp-ckrv-m1 .tp-ckrv_mjt{stroke-width:1;transform:scaleY(4)}.tp-ckrv.tp-ckrv-m1 .tp-ckrv_mnt{transform:scaleY(2)}.tp-ckrv.tp-ckrv-m1 .tp-ckrv_l{line-height:12px}.tp-ckrv.tp-ckrv-m2::before{transform:translateY(3px)}.tp-ckrv.tp-ckrv-m2::after{border-radius:2px;bottom:1px;height:4px;width:4px}.tp-ckrv.tp-ckrv-m2 .tp-ckrv_g{display:none}.tp-ckrv.tp-ckrv-m2 .tp-ckrv_l{line-height:12px;transform:translateX(-50%)}.tp-ckrv.tp-ckrv-mw::before,.tp-ckrv.tp-ckrv-mw::after{display:none}.tp-ckrv.tp-ckrv-mw .tp-ckrv_g{bottom:0;opacity:.2}.tp-ckrv.tp-ckrv-mw .tp-ckrv_mjt,.tp-ckrv.tp-ckrv-mw .tp-ckrv_mnt{stroke:var(--in-fg);stroke-width:2;transform:scaleY(10)}.tp-ckrv.tp-ckrv-mw .tp-ckrv_l{display:none}.tp-ckrtxtv{display:flex}.tp-ckrtxtv_r{flex:2}.tp-ckrtxtv_t{flex:1;margin-left:4px}',accept(t,e){if("number"!=typeof t)return null;const n=h,i=p(e,{view:n.required.constant("camerawheel"),amount:n.optional.number,max:n.optional.number,min:n.optional.number,step:n.optional.number,wide:n.optional.boolean});return i?{initialValue:t,params:i}:null},binding:{reader:t=>U,constraint:t=>rt(t.params),writer:t=>F},controller(t){var e,n;const i=t.constraint,r=J(i,t.initialValue),s={ring:N(0),text:N(H(i,t.initialValue))};return t.params.wide?new tt(t.document,{formatters:s,seriesId:"w",tooltipEnabled:!0,unit:{ticks:10,pixels:40,value:40*(null!==(e=t.params.amount)&&void 0!==e?e:r)},value:t.value,viewProps:t.viewProps}):new it(t.document,{baseStep:G(i),draggingScale:r,formatters:s,parser:R,seriesId:"w",ringUnit:{ticks:10,pixels:40,value:40*(null!==(n=t.params.amount)&&void 0!==n?n:r)},value:t.value,viewProps:t.viewProps})}}];t.plugins=lt,Object.defineProperty(t,"__esModule",{value:!0})}));
